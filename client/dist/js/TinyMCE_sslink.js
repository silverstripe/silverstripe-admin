!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s="./client/src/legacy/TinyMCE_sslink.js")}({"./client/src/legacy/TinyMCE_sslink.js":function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n("lib/TinyMCEActionRegistrar"),o=i(r),s=n("react-dom"),a=i(s),l=n("jquery"),u=i(l),c=n("lib/ShortcodeSerialiser"),d=n("i18n"),f=i(d),m={init:function(t){function e(){var e=tinymce.activeEditor.selection.getNode(),n=e.getAttribute("href");n&&t.execCommand(o.default.getEditorCommandFromUrl(n))}var n=this,i=navigator.platform.toUpperCase().includes("MAC")?"âŒ˜":"Ctrl",r=f.default._t("Admin.INSERT_LINK","Insert link"),s=f.default.inject(f.default._t("Admin.INSERT_LINK_WITH_SHORTCUT","Insert link {shortcut}"),{shortcut:"["+i+"+K]"}),a=o.default.getSortedActions("sslink",t.getParam("editorIdentifier"),!0).map(function(e){return Object.assign({},e,{onAction:function(){return e.onAction(t)}})});return t.ui.registry.addMenuButton("sslink",{icon:"link",tooltip:s,fetch:function(t){return t(a)}}),t.ui.registry.addNestedMenuItem("sslink",{icon:"link",text:r,getSubmenuItems:function(){return a}}),t.addShortcut("Meta+k","Open link menu",function(){(0,u.default)('[aria-label^="'+r+'"] > button',t.container).first().click()}),t.ui.registry.addButton("sslink-edit",{text:f.default._t("Admin.EDIT_LINK","Edit link"),onAction:e}),t.ui.registry.addButton("sslink-remove",{text:f.default._t("Admin.REMOVE_LINK","Remove link"),onAction:function(){return n.handleRemoveLinkClick(t)}}),t.ui.registry.addContextToolbar("sslink",{predicate:function(e){return t.dom.is(e,"a[href]")},position:"node",scope:"node",items:"sslink-edit sslink-remove"}),{getMetadata:function(){return{name:"Silverstripe Link",url:"https://docs.silverstripe.org/en/4/developer_guides/forms/field_types/htmleditorfield"}}}},handleRemoveLinkClick:function(t){var e=t.execCommand("unlink"),n=t.selection.getNode();return n&&void 0!==n.normalize&&n.normalize(),e}};u.default.entwine("ss",function(t){t(".insert-link__dialog-wrapper").entwine({Element:null,Data:{},Bookmark:null,onunmatch:function(){this._clearModal()},_clearModal:function(){a.default.unmountComponentAtNode(this[0])},open:function(){var t=this.getElement().getEditor().getInstance();this.setBookmark(t.selection.getBookmark(2,!0)),this.renderModal(!0)},close:function(){this.setData({}),this.renderModal(!1)},renderModal:function(){},handleInsert:function(t){this.getElement().getEditor().getInstance().selection.moveToBookmark(this.getBookmark());var e=this.buildAttributes(t),n=(0,c.createHTMLSanitiser)(),i=n(t.Text);return this.insertLinkInEditor(e,i),this.close(),Promise.resolve()},buildAttributes:function(t){var e=t.Anchor,n=t.Link,i=t.TargetBlank,r=t.Description,o=e&&e.length?"#"+e:"";return o=o.replace(/^#+/,"#"),{href:""+n+o,target:i?"_blank":"",title:r}},insertLinkInEditor:function(t,e){var n=this.getElement().getEditor();n.insertLink(t,null,e),n.addUndo(),n.repaint();var i=n.getInstance(),r=i.selection;setTimeout(function(){return r&&r.collapse()},0)},getOriginalAttributes:function(){var e=this.getElement().getEditor(),n=t(e.getSelectedNode()),i=(n.attr("href")||"").split("#");return{Link:i[0]||"",Anchor:i[1]||"",Description:n.attr("title"),TargetBlank:!!n.attr("target")}}})}),tinymce.PluginManager.add("sslink",function(t){return m.init(t)}),e.default=m},i18n:function(t,e){t.exports=i18n},jquery:function(t,e){t.exports=jQuery},"lib/ShortcodeSerialiser":function(t,e){t.exports=ShortcodeSerialiser},"lib/TinyMCEActionRegistrar":function(t,e){t.exports=TinyMCEActionRegistrar},"react-dom":function(t,e){t.exports=ReactDom}});