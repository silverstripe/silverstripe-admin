!function(){"use strict";var t={745:function(t,e,i){var n=i(394);e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot},648:function(t){t.exports=Injector},595:function(t){t.exports=InsertLinkModal},363:function(t){t.exports=React},394:function(t){t.exports=ReactDom},196:function(t){t.exports=TinyMCEActionRegistrar},754:function(t){t.exports=i18n},311:function(t){t.exports=jQuery}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}!function(){var t=s(i(754)),e=s(i(196)),n=s(i(363)),o=i(745),r=s(i(311)),a=i(595),l=i(648);function s(t){return t&&t.__esModule?t:{default:t}}const d="sslinkemail";let c;e.default.addAction("sslink",{text:t.default._t("Admin.LINKLABEL_EMAIL","Link to email address"),onclick:t=>t.execCommand(d),priority:51},c).addCommandWithUrlTest(d,/^mailto:/);const u={init(t){t.addCommand(d,(()=>{window.jQuery(`#${t.id}`).entwine("ss").openLinkEmailDialog()}))}},m="insert-link__dialog-wrapper--email",p=(0,l.loadComponent)((0,a.createInsertLinkModal)("SilverStripe\\Admin\\LeftAndMain","EditorEmailLink"));r.default.entwine("ss",(e=>{e("textarea.htmleditor").entwine({openLinkEmailDialog(){let t=e(`#${m}`);t.length||(t=e(`<div id="${m}" />`),e("body").append(t)),t.addClass("insert-link__dialog-wrapper"),t.setElement(this),t.open()}}),e(`#${m}`).entwine({ReactRoot:null,renderModal(e){var i=this;const r=this.getOriginalAttributes(),a=this.getElement().getEditor(),l=a.getInstance().selection,s=a.getSelection(),d="A"!==l.getNode().tagName&&""===s.trim();let c=this.getReactRoot();c||(c=(0,o.createRoot)(this[0]),this.setReactRoot(c)),c.render(n.default.createElement(p,{isOpen:e,onInsert:function(){return i.handleInsert(...arguments)},onClosed:()=>this.close(),title:t.default._t("Admin.LINK_EMAIL","Insert email link"),bodyClassName:"modal__dialog",className:"insert-link__dialog-wrapper--email",fileAttributes:r,identifier:"Admin.InsertLinkEmailModal",requireLinkText:d}))},getOriginalAttributes(){const t=this.getElement().getEditor(),i=e(t.getSelectedNode()),n=(i.attr("href")||"").split("?");let o=n[0].replace(/^mailto:/,"").split("?")[0];o.match(/.+@.+\..+/)||(o="");const r=n[1]?n[1].match(/subject=([^&]+)/):"";return{Link:o,Subject:r?decodeURIComponent(r[1]):"",Description:i.attr("title")}},buildAttributes(t){const e=this._super(t);let i="",n=e.href.replace(/^mailto:/,"").split("?")[0];return n.match(/.+@.+\..+/)||(n=""),n&&(i=`mailto:${n}`),i&&t.Subject&&(i=`${i}?subject=${encodeURIComponent(t.Subject)}`),e.href=i,delete e.target,e}})})),tinymce.PluginManager.add(d,(t=>{c=t.getParam("editorIdentifier"),u.init(t)}))}()}();