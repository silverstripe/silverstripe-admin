!function(){"use strict";var e={207:function(e){e.exports=Injector},127:function(e){e.exports=InsertLinkModal},594:function(e){e.exports=React},145:function(e){e.exports=ReactDomClient},153:function(e){e.exports=TinyMCEActionRegistrar},815:function(e){e.exports=i18n},669:function(e){e.exports=jQuery}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}!function(){var e=s(n(815)),t=s(n(153)),i=s(n(594)),r=n(145),o=s(n(669)),a=n(127),l=n(207);function s(e){return e&&e.__esModule?e:{default:e}}const d={init(n){t.default.addAction("sslink",{text:e.default._t("Admin.LINKLABEL_EXTERNALURL","Link to external URL"),onAction:e=>e.execCommand("sslinkexternal"),priority:70},n.getParam("editorIdentifier")),n.addCommand("sslinkexternal",(()=>{window.jQuery(`#${n.id}`).entwine("ss").openLinkExternalDialog()}))}},c="insert-link__dialog-wrapper--external",u=(0,l.loadComponent)((0,a.createInsertLinkModal)("SilverStripe\\Admin\\LeftAndMain","EditorExternalLink"));o.default.entwine("ss",(t=>{t("textarea.htmleditor").entwine({openLinkExternalDialog(){let e=t(`#${c}`);e.length||(e=t(`<div id="${c}" />`),t("body").append(e)),e.addClass("insert-link__dialog-wrapper"),e.setElement(this),e.open()}}),t(`#${c}`).entwine({ReactRoot:null,renderModal(t){var n=this;const o=this.getOriginalAttributes(),a=this.getRequireLinkText();let l=this.getReactRoot();l||(l=(0,r.createRoot)(this[0]),this.setReactRoot(l)),l.render(i.default.createElement(u,{isOpen:t,onInsert:function(){return n.handleInsert(...arguments)},onClosed:()=>this.close(),title:e.default._t("Admin.LINK_EXTERNAL","Insert external link"),bodyClassName:"modal__dialog",className:"insert-link__dialog-wrapper--external",fileAttributes:o,identifier:"Admin.InsertLinkExternalModal",requireLinkText:a}))},buildAttributes(e){const t=this._super(e);let n=t.href;return n.match(/:\/\//)||(n=`${window.location.protocol}//${n}`),n=n.replace(/.*:\/\/(#.*)$/,"$1"),n.match(/:\/\/$/)&&(n=""),t.href=n,t}})})),tinymce.PluginManager.add("sslinkexternal",(e=>d.init(e)))}()}();